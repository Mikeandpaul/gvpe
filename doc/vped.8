.Dd 2002-03-25
.Dt VPED 8
.\" Manual page created by:
.\" Ivo Timmermans <ivo@o2w.nl>
.\" Guus Sliepen <guus@sliepen.eu.org>
.\" Modified extensively by Marc Lehmann <pcg@goof.com>
.Sh NAME
.Nm vped
.Nd Virtual Private Ethernet Daemon
.Sh SYNOPSIS
.Nm
.Op Fl cdDkKnL
.Op Fl -config Ns = Ns Ar DIR
.Op Fl -no-detach
.Op Fl -debug Ns = Ns Ar [LEVEL]
.Op Fl -kill Ns = Ns Ar [SIGNAL]
.Op Fl -mlock
.Op Fl -help
.Op Fl -version
NODENAME
.Sh DESCRIPTION
This is the manual page for vped, the virtual private ethernet daemon.
When started,
.Nm

will read it's configuration file to determine the network topology, and
other configuration information, assuming the role of node NODENAME. It
will then connect to the tun/tap device and set up a socket for incoming
connections.  Then a script will be executed to further configure the
virtual device.  If that succeeds, it will detach from the controlling
terminal and continue in the background, accepting and setting up
connections to other vped daemons that are part of the virtual private
ethernet.

.Sh OPTIONS
.Bl -tag -width indent
.It Fl c, -config Ns = Ns Ar DIR
Read configuration options from
.Ar DIR .
.It Fl d, -debug Ns Op = Ns Ar LEVEL
Increase debug level or set it to
.Ar LEVEL
(see below).
.It Fl -help
Display short list of options.
.It Fl k, -kill Ns Op = Ns Ar SIGNAL
Attempt to kill a running
.Nm
(optionally with the specified
.Ar SIGNAL
instead of SIGTERM) and exit.
.It Fl D, -no-detach
Don't fork and detach.
.It Fl L, -mlock
Lock vped into main memory.
This will prevent sensitive data like shared private keys to be written to the system swap files/partitions.
.It Fl -version
Output version information and exit.
.El
.Sh SIGNALS
.Bl -tag -width indent
.It HUP
Closes all connections, resets the retry time and will start connecting again
(it will NOT re-read the config file). This is useful e.g. in a /etc/ppp/if-up script.
.El
.Sh FILES
.Bl -tag -width indent
.It Pa /etc/vpe/vped.conf
The configuration file for
.Nm .
.It Pa /etc/vpe/if-up
Script which is executed as soon as the virtual network device has been allocated.
Purpose is to further configure that device.
.It Pa /etc/vpe/node-up
Script which is executed whenever a node connects to this node. This can be used
for example to run nsupdate.
.It Pa /etc/vpe/node-down
Script which is executed whenever a conenction to another node is lost.
for example to run nsupdate.
.It Pa /etc/vpe/pubkey/*
The directory containing the public keys for every node, usually autogenerated
by executing vpectrl --generate-keys.
.It Pa /var/run/vped.pid
The PID of the currently running
.Nm
is stored in this file.
.El
.Sh BUGS
.Sy The cryptography in vped is not well tested yet. Use it at your own risk!
.Pp
If you find any bugs, report them to vpe@plan9.de.
.Sh TODO
A lot.
.Sh SEE ALSO
.Xr vpe.conf 5 ,
.Xr vpectrl 8 ,
.Pp
The full documentation for vpe is maintained as a Texinfo manual.
If the info and tinc programs are properly installed at your site,
the command
.Ic info vpe
should give you access to the complete manual.
.Pp
vpe comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it under certain conditions;
see the file COPYING for details.
.Sh AUTHORS
.An "Marc Lehmann" Aq vpe@plan9.de
.Pp
And thanks to many others for their contributions to vpe, especially the tincd authors
who inspired this program and whose sourcecode I scavanged!
